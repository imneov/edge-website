# 租户资源管理指南

## 概述

租户资源管理提供了对租户空间内各类资源的统一管理能力，包括边缘节点资源、算力资源、设备管理和应用资源。通过资源管理功能，管理员可以有效地分���、监控和优化租户空间的资源使用。

## 边缘资源管理

### 节点资源管理

#### 访问路径
- **导航**: 租户空间 → 边缘资源 → 节点资源
- **URL**: `/tenant/[tenant-id]/nodegroups/[nodegroupId]/nodes`
- **权限要求**: 租户空间管理员或节点管理权限

#### 节点资源功能

##### 节点列表
- **节点名称**: 节点的唯一标识符
- **节点状态**: 在线/离线状态
- **主机信息**: 主机名和网络信息
- **系统信息**: 操作系统版本和架构
- **Agent版本**: 边缘Agent版本信息
- **最后心跳**: 最后一次通信时间

##### 节点详情
每个节点的详细信息包括：
- **基本信息**: 节点名称、ID、创建时间
- **状态信息**: 运行状态、健康状态
- **配置信息**: 系统配置、网络配置
- **资源信息**: CPU、内存、存储使用情况
- **事件日志**: 节点事件和操作日志

##### 节点操作
- **查看详情**: 查看节点详细信息
- **编辑配置**: 修改节点配置
- **监控数据**: 查看实时监控数据
- **事件日志**: 查看节点事件历史
- **终端访问**: 通过终端访问节点

### 算力管理 (GPU管理)

#### 访问路径
- **导航**: 租户空间 → 边缘资源 → 算力管理
- **URL**: `/tenant/[tenant-id]/nodegroups/[nodegroupId]/gpus`
- **功能**: 管理GPU资源的分配和使用

#### GPU资源管理

##### GPU信息展示
- **GPU型号**: 显示GPU硬件型号
- **驱动版本**: GPU驱动程序版本
- **使用状态**: GPU使用情况和分配状态
- **性能指标**: GPU利用率、内存使用、温度等

##### GPU分配管理
- **资源分配**: 为应用分配GPU资源
- **使用监控**: 监控GPU使用情况
- **性能优化**: 优化GPU资源使用效率
- **故障诊断**: 诊断GPU硬件问题

### 设备管理

#### 访问路径
- **导航**: 租户空间 → 边缘资源 → 设备管理
- **URL**: `/tenant/[tenant-id]/nodegroups/[nodegroupId]/device`
- **功能**: 管理边缘设备和设备配置

#### 设备管理功能

##### 设备列表
- **设备名称**: 设备的唯一标识符
- **设备类型**: 设备类型和分类
- **连接状态**: 设备连接和在线状态
- **配置状态**: 设备配置状态
- **最后通信**: 最后一次通信时间

##### 设备操作
- **设备详情**: 查看设备详细信息
- **配置管理**: 管理设备配置
- **监控数据**: 查看设备监控数据
- **事件日志**: 查看设备事件历史
- **远程控制**: 远程控制设备操作

### 设备模版管理

#### 访问路径
- **导航**: 租户空间 → 边缘资源 → 设备模版
- **URL**: `/tenant/[tenant-id]/nodegroups/[nodegroupId]/device-profile`
- **功���**: 管理设备配置模版

#### 设备模版功能

##### 模版管理
- **创建模版**: 创建新的设备配置模版
- **编辑模版**: 修改现有设备模版
- **删除模版**: 删除不需要的模版
- **模版应用**: 将模版应用到设备

##### 模版配置
- **设备配置**: 设备连接和通信配置
- **数据采集**: 数据采集策略配置
- **告警规则**: 设备告警规则设置
- **安全策略**: 设备安全访问策略

## 边缘应用管理

### 工作负载管理

#### 访问路径
- **导航**: 租户空间 → 边缘应用 → 工作负载
- **URL**: `/tenant/[tenant-id]/namespaces/[namespaceId]/deployments`
- **功能**: 管理租户空间内的应用工作负载

#### 工作负载类型

##### 部署 (Deployments)
- **无状态应用**: 管理无状态应用部署
- **滚动更新**: 支持滚动更新和回滚
- **副本管理**: 管理应用副本数量
- **健康检查**: 应用健康状态检查

##### 有状态副本集 (StatefulSets)
- **有状态应用**: 管理有状态应用部署
- **持久标识**: 为每个Pod分配持久标识
- **有序部署**: 保证Pod的有序部署和扩展
- **数据持久化**: 支持数据持久化存储

##### 守护进程集 (DaemonSets)
- **集群级服务**: 在每个节点上运行Pod副本
- **系统服务**: 适合系统级和服务型应用
- **日志收集**: 常用于日志收集和监控
- **网络插件**: 适合网络插件部署

#### 工作负载操作
- **创建部署**: 创建新的应用部署
- **更新配置**: 更新应用配置和镜像
- **扩展副本**: 手动或自动扩展副本数
- **查看日志**: 查看应用日志和事件
- **终端访问**: 通过终端访问容器

### 应用模板管理

#### 访问路径
- **导航**: 租户空间 → 边缘应用 → 应用模板
- **URL**: `/tenant/[tenant-id]/app-templates`
- **功能**: 管理应用部署模板

#### 应用模板功能

##### 模板管理
- **创建模板**: 创建应用部署模板
- **编辑模板**: 修改现有模板
- **版本管理**: 管理模板版本
- **模板分享**: 在租户间分享模板

##### 模板配置
- **应用配置**: 应用基本配置
- **资源限制**: CPU和内存限制设置
- **存储配置**: 持久化存储配置
- **网络配置**: 服务发现和网络配置

### 应用部署管理

#### 访问路径
- **导航**: 租户空间 → 边缘应用 → 应用部署
- **URL**: `/tenant/[tenant-id]/namespaces/[namespaceId]/apps`
- **功能**: 管理应用部署和实例

#### 应用部署功能

##### 部署管理
- **创建部署**: 基于模板或自定义配置部署应用
- **部署监控**: 监控部署状态和进度
- **版本管理**: 管理应用版本和回滚
- **实例管理**: 管理应用实例和副本

##### 部署策略
- **滚动更新**: 逐步更新应用实例
- **蓝绿部署**: 蓝绿部署策略
- **金丝雀发布**: 金丝雀发布策略
- **A/B测试**: A/B测试部署

## 配置管理

### 配置字典 (ConfigMaps)

#### 访问路径
- **导航**: 租户空间 → 配置管理 → 配置字典
- **URL**: `/tenant/[tenant-id]/namespaces/[namespaceId]/configmaps`
- **功能**: 管理应用配置数据

#### 配置字典功能

##### 配置管理
- **创建配置**: 创建新的配置字典
- **编辑配置**: 修改配置内容
- **版本管理**: 管理配置版本
- **配置挂载**: 将配置挂载到容器

##### 配置使用
- **环境变量**: 作为环境变量注入
- **配置文件**: 作为配置文件挂载
- **命令行参数**: 作为命令行参数传递

### 保密字典 (Secrets)

#### 访问路径
- **导航**: 租户空间 → 配置管理 → 保密字典
- **URL**: `/tenant/[tenant-id]/namespaces/[namespaceId]/secrets`
- **功能**: 管理敏感信息和密码

#### 保密字典功能

##### 密钥管理
- **创建密钥**: 创建新的保密字典
- **密钥类型**: 支持多种密钥类型
- **密钥编码**: Base64编码存储
- **密钥挂载**: 安全挂载到容器

##### 安全特性
- **数据加密**: 传输和存储加密
- **访问控制**: 严格的访问权限控制
- **审计日志**: 密钥访问审计记录
- **密钥轮换**: 支持密钥定期轮换

## 接入管理

### 节点注册管理

#### 访问路径
- **导航**: 租户空间 → 接入管理 → 节点注册
- **URL**: `/tenant/[tenant-id]/node-registrations`
- **功能**: 管理边缘节点注册

#### 节点注册功能

##### 注册流程
- **生成Token**: 生成节点注册Token
- **节点安装**: 在节点上安装Agent
- **自动注册**: 节点自动注册到平台
- **状态监控**: 监控注册状态

##### 注册管理
- **待审批节点**: 查看待审批的节点
- **注册审批**: 审批节点注册申请
- **注册拒绝**: 拒绝不合格的节点
- **注册配置**: 配置注册策略

### 节点升级管理

#### 访问路径
- **导航**: 租户空间 → 接入管理 → 节点升级
- **URL**: `/tenant/[tenant-id]/node-upgrades`
- **功能**: 管理节点版本升级

#### 节点升级功能

##### 升级管理
- **版本检查**: 检查节点版本和更新
- **升级计划**: 制定升级计划和策略
- **批量升级**: 批量升级多个节点
- **升级监控**: 监控升级进度和状态

##### 升级策略
- **滚动升级**: 逐步升级节点
- **灰度升级**: 小范围测试升级
- **回滚机制**: 升级失败回滚
- **维护窗口**: 设置维护时间���口

## 资源监控

### 监控指标

#### 资源使用监控
- **CPU使用率**: 实时CPU使用情况
- **内存使用率**: 内存使用和分配情况
- **存储使用率**: 存储空间使用情况
- **网络流量**: 网络流入流出流量

#### 应用性能监控
- **响应时间**: 应用响应时间
- **吞吐量**: 应用处理请求能力
- **错误率**: 应用错误发生频率
- **可用性**: 应用可用性统计

### 告警设置

#### 告警规则
- **阈值告警**: 基于阈值的告警
- **趋势告警**: 基于趋势的告警
- **异常检测**: 自动检测异常情况
- **告警通知**: 告警通知和推送

## 最佳实践

### 资源分配
1. **合理规划**: 根据应用需求规划资源
2. **配额管理**: 设置合理的资源配额
3. **弹性扩展**: 配置自动扩展策略
4. **成本优化**: 优化资源使用成本

### 应用部署
1. **模板化**: 使用应用模板标准化部署
2. **版本管理**: 管理应用版本和配置
3. **健康检查**: 配置应用健康检查
4. **故障恢复**: 配置自动故障恢复

### 安全管理
1. **权限控制**: 实施严格的权限控制
2. **密钥管理**: 安全管理密钥和密码
3. **网络安全**: 配置网络隔离策略
4. **审计日志**: 启用操作审计日志

## 故障排除

### 常见问题

#### 节点问题
- **节点离线**: 检查网络连接和Agent状态
- **资源不足**: 检查节点资源使用情况
- **性能问题**: 分析性能指标和日志

#### 应用问题
- **部署失败**: 检查配置和资源
- **运行异常**: 查看应用日志和事件
- **性能问题**: 监控应用性能指标

#### 资源问题
- **资源不足**: 扩容或优化资源使用
- **配额超限**: 调整资源配额
- **性能瓶颈**: 识别和优化性能瓶颈

## 相关文档

- [租户空间概览](./tenant-overview.md)
- [应用管理指南](./application-management.md)
- [监控告警设置](./monitoring-setup.md)
- [故障排除指南](./troubleshooting.md)