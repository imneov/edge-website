# 用户管理详细指南

## 概述

用户管理是IAM模块的核心功能，提供了完整的用户生命周期管理能力。通过用户管理功能，管理员可以创建、查看、编辑、删除用户账号，管理用户角色，重置密码等。

## 用户列表界面

### 访问用户管理
1. 进入"控制台" → "访问控制" → "用户管理"
2. 系统显示用户列表界面

### 界面功能
![用户管理界面](./images/user-management-main.png)

用户列表界面包含以下功能：
- **搜索功能**：支持按用户名搜索用户
- **新建用户**：创建新用户账号
- **刷新列表**：手动刷新用户列表数据
- **批量操作**：支持批量选择用户进��操作
- **用户详情**：查看和管理单个用户信息

### 用户信息显示
用户列表以表格形式展示，包含以下信息：
- **用户名**：用户的登录账号，可点击查看详情
- **邮箱**：用户联系邮箱
- **状态**：用户当前状态（活跃/禁用/待激活）
- **操作菜单**：编辑信息、管理角色、重置密码、删除

## 创建用户

### 创建步骤

1. **点击"新建用户"按钮**
   - 位于用户列表页面右上角
   - 系统弹出创建用户对话框

2. **填写用户基本信息**
   ```
   必填信息：
   - 用户名：唯一标识符，只能包含字母、数字、连字符
   - 邮箱：用户联系邮箱，用于接收系统通知
   - 密码：初始登录密码

   可选信息：
   - 显示名称：用户的友好名称
   - 描述：用户用途或职责说明
   ```

3. **设置用户角色**
   - 选择用户初始角色
   - 可以为用户分配多个角色
   - 角色决定用户的初始权限

4. **确认创建**
   - 点击"确定"按钮完成用户创建
   - 系统自动刷新用户列表
   - 新创建的用户出现在列表中

### 创建注意事项
- 用户名必须全局唯一，不能与现有用户重复
- 邮箱地址建议使用真实有效的邮箱
- 初始密码应遵循密码复杂度策略
- 创建后建议通知用户首次登录时修改密码

## 查看用户详情

### 用户详情页面

1. **进入用户详情**
   - 在用户列表中点击用户名
   - 系统跳转到用户详情页面

2. **用户详情信息**
   ```
   基本信息区域：
   - 用户名：用户登录账号
   - 显示名称：用户友好名称
   - 邮箱：联系邮箱
   - 状态：当前用户状态
   - 创建时间：账号创建时间
   - 最后登录：最近一次登录时间

   角色信息区域：
   - 平台角色：用户在平台层面的角色
   - 集群角色：用户在特定集群的角色
   - 工作空间角色：用户在工作空间的角色
   - 项目角色：用户在项目的角色

   登录历史：
   - 登录时间记录
   - 登录IP地址
   - 登录方式
   ```

### 用户状态说明

用户状态包括：
- **活跃（Active）**：用户账号正常，可以正常登录和使用
- **禁用（Disabled）**：用户账号被禁用，无法登录
- **待激活（Pending）**：用户账号待激活，需要完成激活流程

## 编辑用户信息

### 编辑操作

1. **打开编辑对话框**
   - 在用户列表中找到目标用户
   - 点击操作菜单中的"编辑信息"
   - 系统弹出编辑用户信息对话框

2. **修改用户信息**
   ```
   可修改信息：
   - 显示名称：用户友好名称
   - 邮箱：用户联系邮箱
   - 描述：用户说明信息

   不可修改信息：
   - 用户名：创建后不能修改
   - 状态：通过其他方式管理
   ```

3. **保存修改**
   - 点击"确定"按钮保存修改
   - 系统自动更新用户信息
   - 修改立即生效

### 编辑注意事项
- 用户名创建后不能修改，如需更改需要创建新用户
- 邮箱修改后，系统通知将发送到新邮箱
- 描述信息支持多语言，可存储中文和英文描述

## 管理用户角色

### 角色管理功能

1. **打开角色管理对话框**
   - 在用户列表中找到目标用户
   - 点击操作菜单中的"管理角色"
   - 系统弹出用户角色管理对话框

2. **角色分配界面**
   ```
   角色分类显示：
   - 平台角色：platform-admin, platform-regular等
   - 集群角色：针对特定集群的角色
   - 工作空间角色：针对特定工作空间的角色
   - 项目角色：针对特定项目的角色
   ```

3. **分配角色**
   - 勾选需要分配给用户的角色
   - 可以同时分配多个不同层级的角色
   - 系统显示每个角色的权限说明

4. **保存角色分配**
   - 点击"确定"按钮保存角色分配
   - 系统更新用户权限
   - 权限变更立即生效

### 角色管理注意事项
- 用户可以拥有多个不同层级的角色
- 同一层级的角色遵循权限叠加原则
- 角色变更会影响用户对资源的访问权限
- 建议定期审查用户角色分配

## 重置用户密码

### 密码重置流程

1. **启动密码重置**
   - 在用户列表中找到目标用户
   - 点击操作菜单中的"重置密码"
   - 系统弹出密码重置对话框

2. **设置新密码**
   ```
   密码要求：
   - 最小长度：8个字符
   - 包含大小写字母、数字、特殊字符
   - 不能与用户名相同
   - 不能使用常见弱密码
   ```

3. **确认密码重置**
   - 点击"确定"按钮执行密码重置
   - 系统验证密码强度
   - 重置成功后显示确认信息

### 密码重置注意事项
- 重置密码后，用户需要使用新密码重新登录
- 建议通过安全渠道通知用户新密码
- 用户首次登录后应立即修改密码
- 密码重置操作会被记录在审计日志中

## 删除用户

### 删除用户流程

1. **启动删除流程**
   - 在用户列表中找到目标用户
   - 点击操作菜单中的"删除"
   - 系统弹出删除确认对话框

2. **删除确认**
   ```
   安全确认机制：
   - 系统要求输入要删除的用户名
   - 确保操作者明确知道删除操作
   - 防止误操作导致数据丢失
   ```

3. **确认删除**
   - 准确输入用户名
   - 点击"确定"按钮执行删除
   - 系统执行删除操作

4. **删除结果**
   - 删除成功后显示确认信息
   - 用户从用户列表中移除
   - 用户的所有权限和配置被清除

### 删除注意事项
- ⚠️ **危险操作**：删除用户无法撤销，请谨慎操作
- 删除用户会同时移除其所有角色绑定
- 删除用户会清除其个人配置和偏好设置
- 删除用户不会影响已创建的资源和数据
- 建议删除前先确认用户不再需要访问系统

## 用户搜索和筛选

### 搜索功能

1. **基本搜索**
   - 在搜索框中输入用户名
   - 系统实时显示匹配结果
   - 支持模糊搜索

2. **搜索特性**
   - 实时搜索：输入时自动过滤结果
   - 大小写不敏感
   - 支持部分匹配
   - 搜索性能优化（防抖处理）

3. **清除搜索**
   - 清空搜索框内容
   - 系统显示所有用户
   - 重置到第一页

## 分页和排序

### 分页功能
- **页面大小**：默认每页显示10个用户
- **页码导航**：支持上一页、下一页、跳转
- **总数显示**：显示用户总数和当前页码
- **性能优化**：后端分页，支持大量用户

### 排序功能
- **默认排序**：按用户名字母顺序排序
- **排序指示器**：表格标题显示排序状态
- **排序稳定性**：搜索和分页保持排序状态

## 批量操作

### 批量选择
1. **全选功能**
   - 点击表头的复选框
   - 选择当前页所有用户
   - 支持跨页选择

2. **单独选择**
   - 点击单个用户的复选框
   - 可以多选组合
   - 显示已选择用户数量

### 批量操作功能
- 批量删除：删除多个用户
- 批量角色分配：为多个用户分配相同角色
- 批量导出：导出用户信息

## 用户管理最佳实践

### 安全建议
1. **定期审查**：每季度审查用户列表，删除不需要的账号
2. **最小权限**：为用户分配最小必要权限
3. **密码策略**：强制用户定期更换密码
4. **监控异常**：监控异常登录行为

### 管理流程
1. **入职流程**：为新员工创建账号并分配初始角色
2. **转岗流程**：根据新岗位调整用户角色和权限
3. **离职流程**：及时禁用或删除离职员工账号

### 操作建议
- 重要操作前进行备份
- 记录用户变更历史
- 定期导出用户列表
- 建立用户管理规范

## 故障排查

### 常见问题

**问题1：无法创建用户**
- 检查用户名是否已存在
- 确认邮箱格式是否正确
- 验证密码是否符合复杂度要求

**问题2：用户无法登录**
- 确认用户状态是否为"活跃"
- 检查用户是否被分配了角色
- 验证密码是否正确

**问题3：角色分配不生效**
- 刷新用户角色缓存
- 检查角色作用范围是否正确
- 确认用户是否重新登录

**问题4：删除用户失败**
- 检查用户是否有关联资源
- 确认是否有足够的权限删除用户
- 查看系统错误日志

## 相关文档
- [IAM概述](./iam-overview.md)
- [角色管理指南](./role-management.md)
- [权限管理指南](./permission-management.md)
- [访问控制最佳实践](./access-control-best-practices.md)