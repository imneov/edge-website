---
sidebar_position: 4
title: "任务管理"
description: "创建和管理批量运维任务"
---

# 任务管理

> **导航路径**: 控制台 > OTA > 任务管理
> **访问地址**: `/boss/ota/task-management`
> **所需权限**: 平台管理员

## 功能说明

任务管理页面用于创建和管理批量运维任务。您可以同时对多个边缘节点执行命令、读取文件、写入文件或运行 Playbook，查看任务执行进度和结果。

## 页面概览

![任务管理](./images/ota-task-management-main.png)

任务列表包含以下信息：

| 列 | 说明 |
|------|------|
| 任务名称 | 任务的名称和描述 |
| 任务类型 | 执行命令、读取文件、写入文件、Playbook |
| 状态 | 任务执行状态（进行中、已完成、失败） |
| 目标节点数 | 任务涉及的节点数量 |
| 创建时间 | 任务的创建时间 |

## 任务类型

| 类型 | 说明 |
|------|------|
| 执行命令 | 在多个节点上同时执行 Shell 命令 |
| 读取文件 | 从多个节点上读取指定文件内容 |
| 写入文件 | 向多个节点写入文件（配置分发） |
| Playbook | 在多个节点上运行自动化脚本 |

## 操作指南

### 操作一：创建执行命令任务

**操作步骤**

1. 在任务列表页面，点击 **创建任务** 按钮

2. 选择任务类型 **执行命令**

   ![创建任务](./images/ota-create-task-dialog.png)

3. 填写任务信息：

   | 字段 | 是否必填 | 说明 |
   |------|----------|------|
   | 任务名称 | 是 | 任务的标识名称 |
   | 命令 | 是 | 要执行的 Shell 命令 |
   | 目标节点 | 是 | 选择要执行任务的节点 |

4. 点击 **确认** 创建任务

**操作结果**

任务创建成功，开始在选中的节点上执行命令。

### 操作二：创建读取文件任务

**操作步骤**

1. 点击 **创建任务**，选择 **读取文件**

   ![读取文件任务](./images/ota-create-task-read-file.png)

2. 填写要读取的文件路径

3. 选择目标节点

4. 确认创建

**操作结果**

任务执行后，可以查看各节点上指定文件的内容。

### 操作三：创建写入文件任务

**操作步骤**

1. 点击 **创建任务**，选择 **写入文件**

   ![写入文件任务](./images/ota-create-task-write-file.png)

2. 填写目标文件路径和文件内容

3. 选择目标节点

4. 确认创建

**操作结果**

文件被写入到选中节点的指定路径。

### 操作四：创建 Playbook 任务

**操作步骤**

1. 点击 **创建任务**，选择 **Playbook**

   ![Playbook 任务](./images/ota-create-task-playbook.png)

2. 上传或编写 Playbook 脚本

3. 选择目标节点

4. 确认创建

**操作结果**

Playbook 在选中的节点上执行。

### 操作五：查看任务详情

**操作步骤**

1. 在任务列表中，点击目标任务的名称

   ![任务详情](./images/ota-task-details.png)

2. 查看任务的整体进度和每个节点的执行结果

3. 点击具体节点查看详细执行日志

   ![节点执行详情](./images/ota-task-device-details.png)

**操作结果**

了解任务在每个节点上的执行状态和输出。

## 常见问题

### 问题：任务状态一直显示「进行中」
**现象**：任务创建后长时间未完成
**原因**：部分目标节点离线，任务等待所有节点响应
**解决**：检查目标节点的在线状态，离线节点的任务会超时标记为失败

### 问题：任务执行失败
**现象**：任务状态显示为「失败」
**原因**：命令执行出错、文件路径不存在或权限不足
**解决**：在任务详情中查看具体节点的错误信息，根据错误原因修正后重新创建任务
