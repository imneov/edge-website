# 集群模块文档概览

## 概述

边缘计算平台的集群模块提供了完整的集群生命周期管理能力，支持多集群统一管理、资源监控、访问控制和企业级安全特性。

## 核心功能

### 1. 集群管理

完整的集群生命周期管理，支持：

- **多集群管理**：统一管理和监控多个Kubernetes集群
- **集群类型**：支持边缘集群（edge）和虚拟集群（vcluster）
- **集群监控**：实时监控集群状态和资源使用情况
- **集群配置**：管理集群的基本信息、成员权限和可见性设置

📖 详细文档：[集群管理指南](./cluster-management.md)

### 2. 节点组管理

灵活的节点分组和管理能力：

- **节点分组**：将节点按业务逻辑或物理位置分组
- **资源监控**：实时监控节点组的CPU、内存、磁盘使用率
- **项目授权**：将节点组授权给特定项目使用
- **批量运维**：对节点组进行批量操作和管理

📖 详细文档：[节点组管理指南](./node-groups.md)

### 3. 项目管理

基于Namespace的多租户资源隔离：

- **资源隔离**：不同项目之间的资源相互隔离
- **配额管理**：为每个项目设置资源配额限制
- **访问控制**：精细化控制用户对项目的访问权限
- **状态监控**：实时监控项目中的资源使用情况

📖 详细文档：[项目管理指南](./projects.md)

### 4. 集群配置

全面的集群配置和权限管理：

- **基本信息**：管理集群的基本配置信息
- **成员管理**：管理集群的用户和访问权限
- **角色管理**：创建和管理集群级别的角色
- **可见性设置**：控制集群对不同租户空间的可见性

📖 详细文档：[集群配置指南](./cluster-settings.md)

## 快速开始

### 查看集群列表

1. 登录边缘计算平台
2. 进入"控制台" → "集群管理"
3. 查看所有已注册的集群及其状态

### 查看集群详情

1. 在集群列表中点击集群名称
2. 进入集群概览页面
3. 查看资源统计、实时用量和配额信息

### 创建节点组

1. 进入集群详情页面
2. 点击"节点组"标签
3. 点击"创建节点组"按钮
4. 配置��点组信息和成员节点

### 创建项目

1. 进入集群详情页面
2. 点击"项目"标签
3. 点击"创建项目"按钮
4. 配置项目名称、资源配额等信息

### 配置集群权限

1. 进入集群详情页面
2. 点击"集群设置"标签
3. 在"集群成员"标签中管理成员和权限
4. 在"集群角色"标签中自定义角色

## 架构说明

### 集群类型

#### 边缘集群（edge）
- 部署在边缘物理设备或虚拟机上的Kubernetes集群
- 直接管理底层节点资源
- 适用于边缘计算场景

#### 虚拟集群（vcluster）
- 运行在宿主集群之上的虚拟化集群
- 共享宿主集群的物理资源
- 提供多租户隔离和资源配额管理

### 层次结构

```
平台
└── 集群（Cluster）
    ├── 节点组（NodeGroup）
    │   └── 节点（Node）
    └── 项目（Project/Namespace）
        ├── 工作负载（Workload）
        ├── 服务（Service）
        └── 配置（Config）
```

### 资源关系

- **集群**：顶层的资源管理单位
- **节点组**：集群内节点的逻辑分组
- **节点**：实际的计算资源单元
- **项目**：资源隔离和多租户的基本单位
- **工作负载**：部署在项目中的应用

## 监控和运维

### 资源监控

平台提供以下监控能力：

- **集群级别**：监控整体资源使用情况和健康状况
- **节点组级别**：监控节点组的资源使用率和健康状态
- **项目级别**：监控项目的资源分配和使用情况
- **应用级别**：监控应用的性能和可用性

### 告警机制

支持配置以下告警：

- **资源告警**：CPU、内存、磁盘使用率告警
- **健康告警**：节点、应用的健康状态告警
- **性能告警**：应用性能指标告警
- **安全告警**：异常访问和操作告警

### 日志审计

完整的操作审计记录：

- **用户操作**：记录用户的重要操作
- **权限变更**：记录角色和权限的修改
- **资源变更**：记录资源的创建、修改、删除操作
- **系统事件**：记录重要的系统事件

## 安全和权限

### 访问控制

平台提供多层次的访问控制：

1. **平台级别**
   - 平台管理员：拥有所有权限
   - 租户管理员：管理租户空间内的资源

2. **集群级别**
   - 集群管理员：管理集群的所有资源
   - 集群查看者：只能查看集群资源

3. **项目级别**
   - 项目管理员：管理项目的所有资源
   - 项目开发者：在项目中部署和管理应用

### 角色管理

#### 内置角色

- **cluster-admin**：集群管理员
- **cluster-viewer**：集群查看者
- **cluster-edit**：集群编辑者
- **cluster-operator**：集群运维人员

#### 自定义角色

- 根据业务需求创建自定义角色
- 为角色配置精确的权限规则
- 将角色分配给用户和用户组

### 资源配额

支持以下配额控制：

- **CPU配额**：限制项目的CPU使用量
- **内存配额**：限制项目的内存使用量
- **存储配额**：限制项目的存储使用量
- **资源数量**：限制项目可以创建的资源数量

## 最佳实践

### 集群规划

1. **命名规范**
   - 使用有意义的集群名称
   - 遵循DNS命名规范

2. **标签管理**
   - 为集群添加适当的标签
   - 便于集群分类和管理

3. **资源规划**
   - 合理规划集群资源容量
   - 预留足够的资源用于扩展

### 节点组设计

1. **节点分组**
   - 按业务类型或地理位置分组
   - 考虑故障域和网络延迟

2. **资源配置**
   - 根据工作负载需求设置资源配额
   - 预留足够的资源用于系统组件

3. **高可用设计**
   - 关键应用跨节点组部署
   - 避免单点故障

### 项目管理

1. **项目隔离**
   - 不同业务系统使用不同项目
   - 生产、开发、测试环境分离

2. **资源配额**
   - 根据实际需求设置合理的配额
   - 定期审查和调整配额设置

3. **权限控制**
   - 遵循最小权限原则
   - 定期审计项目访问权限

### 安全管理

1. **访问控制**
   - 实施多层次访问控制
   - 定期审查用户权限

2. **网络隔离**
   - 使用网络策略限制Pod间通信
   - 控制集群对外暴露的服务

3. **监控审计**
   - 启用详细的审计日志
   - 设置安全告警规则

## 故障排除

### 常见问题

1. **集群连接失败**
   - 检查网络连接和防火墙设置
   - 验证kubeconfig配置
   - 确认API Server可访问性

2. **资源使用异常**
   - 检查资源配额设置
   - 查看资源使用趋势
   - 分析应用资源需求

3. **权限配置问题**
   - 检查角色和权限配置
   - 验证用户组成员身份
   - 确认资源访问规则

### 调试工具

- **集群状态检查**：使用平台提供的健康检查工具
- **日志查看**：查看集群组件和应用的日志
- **资源监控**：使用监控仪表板分析性能
- **事件查看**：查看Kubernetes事件了解问题

## 附录

### 术语表

| 术语 | 说明 |
|------|------|
| 集群（Cluster） | Kubernetes集群实例 |
| 节点组（NodeGroup） | 节点的逻辑分组 |
| 节点（Node） | Kubernetes工作节点 |
| 项目（Project） | Kubernetes Namespace，资源隔离单位 |
| 租户空间（Workspace） | 多租户隔离的工作空间 |
| 配额（Quota） | 资源使用限制 |
| 角色（Role） | 权限定义的集合 |

### 参考资源

- [Kubernetes官方文档](https://kubernetes.io/docs/)
- [平台架构介绍](/docs/introduction/architecture)
- [产品概述](/docs/introduction/overview)