# é•œåƒç®¡ç†å¿«é€Ÿå…¥é—¨

## æ¬¢è¿Žä½¿ç”¨é•œåƒç®¡ç†åŠŸèƒ½

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨åœ¨ 10 åˆ†é’Ÿå†…å¿«é€Ÿä¸Šæ‰‹è¾¹ç¼˜è®¡ç®—å¹³å°çš„é•œåƒç®¡ç†åŠŸèƒ½ã€‚

## å‰ç½®æ¡ä»¶

- å·²éƒ¨ç½²è¾¹ç¼˜è®¡ç®—å¹³å°
- å…·æœ‰ç®¡ç†å‘˜æƒé™æˆ–é•œåƒç®¡ç†æƒé™
- å¯è®¿é—®çš„é•œåƒä»“åº“ï¼ˆHarborã€Docker Hub ç­‰ï¼‰

## å¿«é€Ÿå¼€å§‹ï¼ˆ5 æ­¥é…ç½®ï¼‰

### ç¬¬ä¸€æ­¥ï¼šç™»å½•å¹³å°

1. æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®å¹³å°åœ°å€ï¼š`http://your-platform-ip:port`
2. ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•
3. è¿›å…¥ä¸»ç•Œé¢

### ç¬¬äºŒæ­¥ï¼šé…ç½®é•œåƒæº

#### ç‚¹å‡»ã€Œé•œåƒç®¡ç†ã€â†’ã€Œé•œåƒæºç®¡ç†ã€

åœ¨å·¦ä¾§å¯¼èˆªæ æ‰¾åˆ°ã€Œé•œåƒç®¡ç†ã€ï¼Œé€‰æ‹©ã€Œé•œåƒæºç®¡ç†ã€è¿›å…¥é•œåƒæºåˆ—è¡¨é¡µé¢ã€‚

#### æ·»åŠ ç¬¬ä¸€ä¸ªé•œåƒæº

ç‚¹å‡»å³ä¸Šè§’çš„ã€Œæ·»åŠ é•œåƒæºã€æŒ‰é’®ï¼Œå¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š

| å­—æ®µ | ç¤ºä¾‹å€¼ | è¯´æ˜Ž |
|------|--------|------|
| åç§° | `harbor-prod` | å”¯ä¸€æ ‡è¯†ç¬¦ |
| æ˜¾ç¤ºåç§° | `ç”Ÿäº§çŽ¯å¢ƒ Harbor` | æ˜“è¯†åˆ«çš„åç§° |
| å‘½åç©ºé—´ | `default` | æ‰€å±žå‘½åç©ºé—´ |
| åŸŸå | `harbor.example.com` | é•œåƒä»“åº“åœ°å€ |
| ç”¨æˆ·å | `admin` | ç™»å½•ç”¨æˆ·å |
| å¯†ç  | `********` | ç™»å½•å¯†ç  |
| æä¾›è€… | `Harbor` | é•œåƒä»“åº“ç±»åž‹ |

#### æµ‹è¯•è¿žæŽ¥

ç‚¹å‡»ã€Œæµ‹è¯•è¿žæŽ¥ã€æŒ‰é’®ï¼Œç¡®è®¤é…ç½®æ­£ç¡®ï¼š

- âœ… **è¿žæŽ¥æˆåŠŸ**ï¼šç»§ç»­ä¸‹ä¸€æ­¥
- âŒ **è¿žæŽ¥å¤±è´¥**ï¼šæ£€æŸ¥é…ç½®ä¿¡æ¯ï¼Œä¿®æ­£åŽé‡è¯•

### ç¬¬ä¸‰æ­¥ï¼šæ·»åŠ é•œåƒ

#### å¯¼èˆªåˆ°é•œåƒç®¡ç†

åœ¨å·¦ä¾§èœå•é€‰æ‹©ã€Œé•œåƒç®¡ç†ã€â†’ã€Œé•œåƒç®¡ç†ã€è¿›å…¥é•œåƒåˆ—è¡¨é¡µé¢ã€‚

#### æ·»åŠ é•œåƒ

ç‚¹å‡»å³ä¸Šè§’çš„ã€Œæ·»åŠ é•œåƒã€æŒ‰é’®ï¼Œå¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š

| å­—æ®µ | ç¤ºä¾‹å€¼ | è¯´æ˜Ž |
|------|--------|------|
| åç§° | `nginx-latest` | é•œåƒæ ‡è¯†ç¬¦ |
| æ˜¾ç¤ºåç§° | `Nginx æœ€æ–°ç‰ˆæœ¬` | æ˜¾ç¤ºåç§° |
| å‘½åç©ºé—´ | `default` | æ‰€å±žå‘½åç©ºé—´ |
| é•œåƒæº | `harbor-prod` | é€‰æ‹©ä¸Šä¸€æ­¥åˆ›å»ºçš„é•œåƒæº |
| é•œåƒä»“åº“ | `library/nginx` | é•œåƒè·¯å¾„ |
| é•œåƒæ ‡ç­¾ | `latest` | é•œåƒç‰ˆæœ¬æ ‡ç­¾ |
| åŒæ­¥é—´éš” | `1h` | è‡ªåŠ¨åŒæ­¥é—´éš” |

ç‚¹å‡»ã€Œç¡®å®šã€å®Œæˆé…ç½®ã€‚ç³»ç»Ÿä¼šè‡ªåŠ¨å¼€å§‹åŒæ­¥é•œåƒä¿¡æ¯ã€‚

### ç¬¬å››æ­¥ï¼šæŸ¥çœ‹åŒæ­¥çŠ¶æ€

#### æ£€æŸ¥é•œåƒåˆ—è¡¨

è¿”å›žé•œåƒåˆ—è¡¨é¡µé¢ï¼ŒæŸ¥çœ‹æ–°æ·»åŠ çš„é•œåƒï¼š

- **å·²åŒæ­¥** ðŸŸ¢ï¼šé•œåƒä¿¡æ¯å·²åŒæ­¥å®Œæˆ
- **åŒæ­¥ä¸­** ðŸ”„ï¼šæ­£åœ¨åŒæ­¥ä¸­ï¼Œè¯·ç¨å€™
- **åŒæ­¥å¤±è´¥** ðŸ”´ï¼šæ£€æŸ¥é…ç½®å¹¶æ‰‹åŠ¨é‡è¯•

#### æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯

ç‚¹å‡»é•œåƒåç§°è¿›å…¥è¯¦æƒ…é¡µé¢ï¼Œå¯ä»¥æŸ¥çœ‹ï¼š
- é•œåƒåŸºæœ¬ä¿¡æ¯
- åŒæ­¥åŽ†å²è®°å½•
- é•œåƒæ¸…å•ä¿¡æ¯
- é•œåƒå¤§å°å’Œæž¶æž„

### ç¬¬äº”æ­¥ï¼šåœ¨åº”ç”¨ä¸­ä½¿ç”¨é•œåƒ

#### éƒ¨ç½²åº”ç”¨

åœ¨éƒ¨ç½²åº”ç”¨æ—¶ï¼Œå¼•ç”¨å·²åŒæ­¥çš„é•œåƒï¼š

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deployment
  namespace: default
spec:
  replicas: 3
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
      - name: nginx
        image: harbor.example.com/library/nginx:latest
        imagePullPolicy: IfNotPresent
```

#### éªŒè¯éƒ¨ç½²

```bash
# æŸ¥çœ‹ Pod çŠ¶æ€
kubectl get pods -n default

# æŸ¥çœ‹é•œåƒæ‹‰å–æ—¥å¿—
kubectl logs -f nginx-deployment-xxx -n default
```

## å¸¸è§æ“ä½œ

### æ›´æ–°é•œåƒæºå¯†ç 

ç”±äºŽå®‰å…¨è€ƒè™‘ï¼Œä¸æ”¯æŒç›´æŽ¥æ›´æ–°å¯†ç ã€‚éœ€è¦åˆ é™¤åŽé‡æ–°åˆ›å»ºï¼š

1. åˆ é™¤æ—§çš„é•œåƒæºé…ç½®
2. é‡æ–°åˆ›å»ºé•œåƒæºå¹¶å¡«å†™æ–°å¯†ç 
3. æµ‹è¯•è¿žæŽ¥ç¡®ä¿æ–°å¯†ç æ­£ç¡®

### æ‰¹é‡æ·»åŠ é•œåƒ

ä½¿ç”¨ YAML é…ç½®æ–‡ä»¶æ‰¹é‡åˆ›å»ºï¼š

```bash
# åˆ›å»ºé…ç½®æ–‡ä»¶
cat > images.yaml <<EOF
apiVersion: image.theriseunion.io/v1alpha1
kind: Repository
metadata:
  name: nginx-latest
  namespace: default
spec:
  repository: "library/nginx"
  tag: "latest"
  registryRef:
    name: harbor-prod
    namespace: "default"
---
apiVersion: image.theriseunion.io/v1alpha1
kind: Repository
metadata:
  name: redis-latest
  namespace: default
spec:
  repository: "library/redis"
  tag: "latest"
  registryRef:
    name: harbor-prod
    namespace: "default"
EOF

# åº”ç”¨é…ç½®
kubectl apply -f images.yaml
```

### åˆ é™¤ä¸éœ€è¦çš„é•œåƒ

1. è¿›å…¥é•œåƒç®¡ç†é¡µé¢
2. å‹¾é€‰è¦åˆ é™¤çš„é•œåƒ
3. ç‚¹å‡»ã€Œåˆ é™¤é€‰ä¸­ã€æŒ‰é’®
4. è¾“å…¥åˆ é™¤æ•°é‡ç¡®è®¤åˆ é™¤

### é‡æ–°åŒæ­¥é•œåƒ

**è‡ªåŠ¨åŒæ­¥**ï¼šç³»ç»Ÿä¼šæŒ‰ç…§é…ç½®çš„é—´éš”è‡ªåŠ¨åŒæ­¥

**æ‰‹åŠ¨åŒæ­¥**ï¼š
1. ç‚¹å‡»é•œåƒå³ä¾§çš„ã€Œæ“ä½œã€èœå•ï¼ˆâ‹¯ï¼‰
2. é€‰æ‹©ã€Œç«‹å³åŒæ­¥ã€
3. ç­‰å¾…åŒæ­¥å®Œæˆ

## å®žç”¨æŠ€å·§

### æŠ€å·§ 1ï¼šä½¿ç”¨å‘½åç©ºé—´éš”ç¦»çŽ¯å¢ƒ

```
dev-namespace  â†’ å¼€å‘çŽ¯å¢ƒé•œåƒ
test-namespace â†’ æµ‹è¯•çŽ¯å¢ƒé•œåƒ
prod-namespace â†’ ç”Ÿäº§çŽ¯å¢ƒé•œåƒ
```

### æŠ€å·§ 2ï¼šè®¾ç½®åˆç†çš„åŒæ­¥é—´éš”

- **å¼€å‘çŽ¯å¢ƒ**ï¼š30 åˆ†é’Ÿï¼ˆå¿«é€ŸèŽ·å–æœ€æ–°ç‰ˆæœ¬ï¼‰
- **æµ‹è¯•çŽ¯å¢ƒ**ï¼š1 å°æ—¶ï¼ˆå¹³è¡¡å®žæ—¶æ€§å’Œæ€§èƒ½ï¼‰
- **ç”Ÿäº§çŽ¯å¢ƒ**ï¼š2 å°æ—¶æˆ–æ›´é•¿ï¼ˆç¨³å®šä¼˜å…ˆï¼‰

### æŠ€å·§ 3ï¼šä½¿ç”¨å›ºå®šç‰ˆæœ¬æ ‡ç­¾

```yaml
# âŒ ä¸æŽ¨èï¼šä½¿ç”¨ latest
tag: "latest"

# âœ… æŽ¨èï¼šä½¿ç”¨å›ºå®šç‰ˆæœ¬
tag: "v1.0.0"
```

### æŠ€å·§ 4ï¼šä¸ºé•œåƒæ·»åŠ æè¿°ä¿¡æ¯

åœ¨åˆ›å»ºé•œåƒæ—¶å¡«å†™æ¸…æ™°çš„æè¿°ï¼Œä¾¿äºŽå›¢é˜Ÿåä½œï¼š

- ç”¨é€”è¯´æ˜Ž
- ç»´æŠ¤è€…ä¿¡æ¯
- ä¾èµ–å…³ç³»
- é‡è¦é…ç½®

## è¿›é˜¶åŠŸèƒ½

### é…ç½®å¤šä¸ªé•œåƒæº

ä¸ºä¸åŒçŽ¯å¢ƒæˆ–åœ°ç†ä½ç½®é…ç½®å¤šä¸ªé•œåƒæºï¼š

```yaml
# å›½å†…é•œåƒæº
apiVersion: image.theriseunion.io/v1alpha1
kind: RegistrySecret
metadata:
  name: aliyun-cn
spec:
  domain: "registry.cn-hangzhou.aliyuncs.com"
  provider: "aliyun"

# æµ·å¤–é•œåƒæº
apiVersion: image.theriseunion.io/v1alpha1
kind: RegistrySecret
metadata:
  name: dockerhub
spec:
  domain: "docker.io"
  provider: "dockerhub"
```

### ç›‘æŽ§é•œåƒçŠ¶æ€

è®¾ç½®å‘Šè­¦è§„åˆ™ï¼ŒåŠæ—¶å‘çŽ°é•œåƒåŒæ­¥é—®é¢˜ï¼š

1. è¿›å…¥ã€Œç›‘æŽ§å‘Šè­¦ã€â†’ã€Œå‘Šè­¦è§„åˆ™ã€
2. åˆ›å»ºé•œåƒåŒæ­¥å¤±è´¥å‘Šè­¦
3. é…ç½®é€šçŸ¥æ¸ é“ï¼ˆé‚®ä»¶ã€é’‰é’‰ç­‰ï¼‰

### è‡ªåŠ¨æ¸…ç†æ—§é•œåƒ

é…ç½®é•œåƒä¿ç•™ç­–ç•¥ï¼Œè‡ªåŠ¨æ¸…ç†ä¸éœ€è¦çš„ç‰ˆæœ¬ï¼š

```yaml
apiVersion: image.theriseunion.io/v1alpha1
kind: ImageCleanupPolicy
metadata:
  name: auto-cleanup
spec:
  keepRecent: 3          # ä¿ç•™æœ€è¿‘çš„ 3 ä¸ªç‰ˆæœ¬
  unusedDays: 30         # æ¸…ç† 30 å¤©æœªä½¿ç”¨çš„é•œåƒ
  schedule: "0 2 * * *"  # æ¯å¤©å‡Œæ™¨ 2 ç‚¹æ‰§è¡Œ
```

## æ•…éšœæŽ’æŸ¥

### é—®é¢˜ 1ï¼šé•œåƒæºè¿žæŽ¥å¤±è´¥

**ç—‡çŠ¶**ï¼šæµ‹è¯•è¿žæŽ¥æ—¶æ˜¾ç¤º"è¿žæŽ¥å¤±è´¥"

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥åŸŸåæ˜¯å¦æ­£ç¡®
2. ç¡®è®¤ç½‘ç»œè¿žæŽ¥æ­£å¸¸
3. éªŒè¯ç”¨æˆ·åå¯†ç 
4. æ£€æŸ¥é•œåƒä»“åº“æœåŠ¡çŠ¶æ€

### é—®é¢˜ 2ï¼šé•œåƒåŒæ­¥å¤±è´¥

**ç—‡çŠ¶**ï¼šåŒæ­¥çŠ¶æ€æ˜¾ç¤º"åŒæ­¥å¤±è´¥"

**è§£å†³æ–¹æ³•**ï¼š
1. ç¡®è®¤é•œåƒè·¯å¾„å’Œæ ‡ç­¾æ­£ç¡®
2. æ£€æŸ¥é•œåƒæºè¿žæŽ¥çŠ¶æ€
3. æŸ¥çœ‹é”™è¯¯æ—¥å¿—èŽ·å–è¯¦ç»†ä¿¡æ¯
4. æ‰‹åŠ¨è§¦å‘é‡æ–°åŒæ­¥

### é—®é¢˜ 3ï¼šé•œåƒæ‹‰å–æ…¢

**ç—‡çŠ¶**ï¼šPod å¯åŠ¨æ—¶é—´é•¿

**è§£å†³æ–¹æ³•**ï¼š
1. ä½¿ç”¨æœ¬åœ°æˆ–è¿‘ç«¯çš„é•œåƒæº
2. é¢„å…ˆåŒæ­¥é•œåƒåˆ°è¾¹ç¼˜èŠ‚ç‚¹
3. ä½¿ç”¨æ›´å°çš„é•œåƒåŸºç¡€ç‰ˆæœ¬
4. è°ƒæ•´é•œåƒæ‹‰å–ç­–ç•¥

## ä¸‹ä¸€æ­¥

æ­å–œæ‚¨å·²å®Œæˆé•œåƒç®¡ç†çš„åŸºç¡€é…ç½®ï¼

æŽ¥ä¸‹æ¥æ‚¨å¯ä»¥ï¼š

1. **æ·±å…¥å­¦ä¹ **ï¼šé˜…è¯»è¯¦ç»†çš„ [é•œåƒæºç®¡ç†](./registry-management.md) å’Œ [é•œåƒä»“åº“ç®¡ç†](./repository-management.md) æ–‡æ¡£
2. **å®‰å…¨é…ç½®**ï¼šäº†è§£ [é•œåƒå®‰å…¨ä¸Žè®¤è¯](./security-authentication.md) æœ€ä½³å®žè·µ
3. **ç”Ÿå‘½å‘¨æœŸç®¡ç†**ï¼šå­¦ä¹  [é•œåƒç”Ÿå‘½å‘¨æœŸç®¡ç†](./lifecycle-management.md) ä¼˜åŒ–èµ„æºä½¿ç”¨
4. **API é›†æˆ**ï¼šå‚è€ƒ [API æ–‡æ¡£](./api-reference.md) å®žçŽ°è‡ªåŠ¨åŒ–ç®¡ç†

## èŽ·å–å¸®åŠ©

å¦‚æžœåœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

- **æŸ¥çœ‹æ–‡æ¡£**ï¼šæµè§ˆå·¦ä¾§å¯¼èˆªæ çš„è¯¦ç»†æ–‡æ¡£
- **æ•…éšœæŽ’æŸ¥**ï¼šå‚è€ƒ [æ•…éšœæŽ’æŸ¥æŒ‡å—](./troubleshooting.md)
- **æŠ€æœ¯æ”¯æŒ**ï¼šè”ç³» platform@example.com
- **ç¤¾åŒºè®ºå›**ï¼šè®¿é—® https://community.theriseunion.io

## è§†é¢‘æ•™ç¨‹

æˆ‘ä»¬æä¾›äº†ä¸€ç³»åˆ—è§†é¢‘æ•™ç¨‹å¸®åŠ©æ‚¨å¿«é€Ÿä¸Šæ‰‹ï¼š

1. [5 åˆ†é’Ÿå¿«é€Ÿå…¥é—¨](https://docs.theriseunion.io/videos/quick-start)
2. [é•œåƒæºé…ç½®è¯¦è§£](https://docs.theriseunion.io/videos/registry-config)
3. [é•œåƒåŒæ­¥æœ€ä½³å®žè·µ](https://docs.theriseunion.io/videos/sync-best-practices)
4. [å¸¸è§é—®é¢˜è§£ç­”](https://docs.theriseunion.io/videos/faq)

---

**ç¥æ‚¨ä½¿ç”¨æ„‰å¿«ï¼** ðŸŽ‰

å¦‚æœ‰ä»»ä½•é—®é¢˜æˆ–å»ºè®®ï¼Œæ¬¢è¿Žéšæ—¶è”ç³»æˆ‘ä»¬ã€‚